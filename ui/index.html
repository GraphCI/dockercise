<!DOCTYPE html>
<html>
  <head>
    <link href="style.css" rel="stylesheet" />
    <meta charset=utf-8 />
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui">
    <title>Images</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="http://cytoscape.github.io/cytoscape.js/api/cytoscape.js-latest/cytoscape.min.js"></script>
    <style>
      body {
        font: 14px helvetica neue, helvetica, arial, sans-serif;
      }

      #cy {
        height: 100%;
        width: 100%;
        position: absolute;
        left: 0;
        top: 0;
      }

      #eat {
        position: absolute;
        left: 1em;
        top: 1em;
        font-size: 1em;
        z-index: -1;
        color: #c88;
      }
    </style>
    <script>
      $(function(){
        // photos from flickr with creative commons license

        var cy = cytoscape({
          container: document.getElementById('cy'),

          boxSelectionEnabled: false,
          autounselectify: true,

          style: cytoscape.stylesheet()
            .selector('node')
              .css({
                'content': 'data(id)',
                'height': 80,
                'width': 80,
                'background-fit': 'cover',
                'border-color': '#000',
                'border-width': 3,
                'border-opacity': 0.5
              })
            .selector('.eating')
              .css({
                'border-color': 'red'
              })
            .selector('.eater')
              .css({
                'border-width': 9
              })
            .selector('edge')
              .css({
                'width': 6,
                'target-arrow-shape': 'triangle',
                'line-color': '#ffaaaa',
                'target-arrow-color': '#ffaaaa',
                'curve-style': 'bezier'
              })
            .selector('#dockercise')
              .css({
                'background-image': 'https://farm8.staticflickr.com/7272/7633179468_3e19e45a0c_b.jpg'
              })
            .selector('#get-code')
              .css({
                'background-image': 'https://farm2.staticflickr.com/1261/1413379559_412a540d29_b.jpg'
              })
            .selector('#create-stack')
              .css({
                'background-image': 'https://farm4.staticflickr.com/3063/2751740612_af11fb090b_b.jpg'
              })
          .selector('#wait-for-success')
              .css({
                'background-image': 'https://farm9.staticflickr.com/8316/8003798443_32d01257c8_b.jpg'
              })
          .selector('#assume-role')
              .css({
                'background-image': 'https://farm6.staticflickr.com/5109/5817854163_eaccd688f5_b.jpg'
              })
          .selector('#aws_access_key_id')
              .css({
                'background-image': 'https://farm7.staticflickr.com/6098/6224655456_f4c3c98589_b.jpg'
              })
          .selector('#aws_secret_access_key')
              .css({
                'background-image': 'https://farm1.staticflickr.com/231/524893064_f49a4d1d10_z.jpg'
              })
          .selector('#aws_session_token')
              .css({
                'background-image': 'https://farm3.staticflickr.com/2660/3715569167_7e978e8319_b.jpg'
              }),

          elements: {
            nodes: [
              { data: { id: 'dockercise' } },
              { data: { id: 'assume-role' } },
              { data: { id: 'aws_access_key_id' } },
              { data: { id: 'aws_secret_access_key' } },
              { data: { id: 'aws_session_token' } },
              { data: { id: 'get-code' } },
              { data: { id: 'create-stack' } },
              { data: { id: 'wait-for-success' } },
              { data: { id: 'AWS_DEFAULT_REGION' } },
              { data: { id: 'pause-for-effect' } },
            ],
            edges: [
              { data: { source: 'dockercise', target: 'assume-role'}},
              { data: { source: 'assume-role', target: 'aws_access_key_id'}},
              { data: { source: 'assume-role', target: 'aws_secret_access_key'}},
              { data: { source: 'assume-role', target: 'aws_session_token'}},
              { data: { source: 'dockercise', target: 'get-code'}},
              { data: { source: 'get-code', target: 'create-stack'}},
              { data: { source: 'aws_access_key_id', target: 'create-stack'}},
              { data: { source: 'aws_secret_access_key', target: 'create-stack'}},
              { data: { source: 'aws_session_token', target: 'create-stack'}},
              { data: { source: 'AWS_DEFAULT_REGION', target: 'create-stack'}},
              { data: { source: 'create-stack', target: 'wait-for-success'}},
              { data: { source: 'aws_access_key_id', target: 'wait-for-success'}},
              { data: { source: 'aws_secret_access_key', target: 'wait-for-success'}},
              { data: { source: 'aws_session_token', target: 'wait-for-success'}},
              { data: { source: 'AWS_DEFAULT_REGION', target: 'wait-for-success'}},
            ]
          },

          layout: {
            name: 'breadthfirst',
            directed: true,
            padding: 10
          }
          });
        });
    </script>
  </head>
  <body>
    <div id="cy"></div>
</body>
</html>
